graph TB
    subgraph "API Layer"
        A[FastAPI Router]
        A1[QnA 생성 API]
        A2[검색 평가 API]
        A3[생성 평가 API]
        A4[통합 평가 API]
    end
    
    subgraph "Processor Factory"
        B[get_processor]
        B --> C1[RecallProcessor]
        B --> C2[RagasProcessor]
        B --> C3[PipelineProcessor]
        B --> C4[VectorDBProcessor]
    end
    
    subgraph "Base Processor Pattern"
        D[BaseEvaluationProcessor]
        D --> E1[_load_input]
        D --> E2[_process]
        D --> E3[_save_output]
        D --> E4[run]
    end
    
    subgraph "Evaluation Layer"
        F1[RecallEvaluator<br/>검색 정확도]
        F2[RagasEvaluator<br/>생성 품질]
        F3[VectorDBEvaluator<br/>벡터 검색 성능]
        F4[QnAGenerator<br/>데이터셋 생성]
    end
    
    subgraph "Progress Tracking"
        G[ProgressTracker]
        G --> G1[상태 업데이트]
        G --> G2[진행률 보고]
    end
    
    subgraph "External Services"
        H1[(MinIO<br/>File Storage)]
        H2[데이터 관리 백엔드<br/>Chat Logs]
        H3[LLM 에이전트 서비스<br/>Agent Services]
        H4[LLM 프로바이더 서버<br/>로드밸런싱]
    end
    
    A1 --> B
    A2 --> B
    A3 --> B
    A4 --> B
    
    C1 --> D
    C2 --> D
    C3 --> D
    C4 --> D
    
    C1 -.-> F1
    C2 -.-> F2
    C3 -.-> F3
    
    F1 --> G
    F2 --> G
    F3 --> G
    F4 --> G
    
    F1 --> H1
    F2 --> H1
    F3 --> H1
    F4 --> H1
    
    G --> H2
    F1 --> H3
    F2 --> H3
    F1 --> H4
    
    style A fill:#e1f5ff,stroke:#333,stroke-width:2px,color:#000
    style B fill:#fff9c4,stroke:#333,stroke-width:2px,color:#000
    style D fill:#f3e5f5,stroke:#333,stroke-width:2px,color:#000
    style G fill:#e8f5e9,stroke:#333,stroke-width:2px,color:#000
    style H1 fill:#ffe0b2,stroke:#333,stroke-width:2px,color:#000
    style H2 fill:#ffe0b2,stroke:#333,stroke-width:2px,color:#000
    style H3 fill:#ffe0b2,stroke:#333,stroke-width:2px,color:#000
    style H4 fill:#ffe0b2,stroke:#333,stroke-width:2px,color:#000
