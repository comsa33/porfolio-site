graph TB
    subgraph "API Layer"
        A[FastAPI Router]
        A1["/api/v1/generation/qna"]
        A2["/api/v1/evaluation/passage"]
        A3["/api/v1/evaluation/ragas"]
        A4["/api/v1/evaluation/pipeline"]
    end
    
    subgraph "Processor Factory"
        B[get_processor]
        B --> C1[RecallProcessor]
        B --> C2[RagasProcessor]
        B --> C3[PipelineProcessor]
        B --> C4[VecDashProcessor]
    end
    
    subgraph "Base Processor Pattern"
        D[BaseEvaluationProcessor]
        D --> E1[_load_input]
        D --> E2[_process]
        D --> E3[_save_output]
        D --> E4[run]
    end
    
    subgraph "Evaluation Layer"
        F1[RecallEvaluator<br/>Search Accuracy]
        F2[RagasEvaluator<br/>Generation Quality]
        F3[VecDashEvaluator<br/>Search Performance]
        F4[QnAGenerator<br/>Dataset Creation]
    end
    
    subgraph "Progress Tracking"
        G[ProgressTracker]
        G --> G1[Status Update]
        G --> G2[Progress Report]
    end
    
    subgraph "External Services"
        H1[(MinIO<br/>File Storage)]
        H2[DataHub API<br/>Chat Logs]
        H3[Robi-G API<br/>Agent Services]
        H4[LexiHub API<br/>RAG Search]
    end
    
    A1 --> B
    A2 --> B
    A3 --> B
    A4 --> B
    
    C1 --> D
    C2 --> D
    C3 --> D
    C4 --> D
    
    C1 -.-> F1
    C2 -.-> F2
    C3 -.-> F3
    
    F1 --> G
    F2 --> G
    F3 --> G
    F4 --> G
    
    F1 --> H1
    F2 --> H1
    F3 --> H1
    F4 --> H1
    
    G --> H2
    F1 --> H3
    F2 --> H3
    F1 --> H4
    
    style A fill:#e1f5ff,stroke:#333,stroke-width:2px,color:#000
    style B fill:#fff9c4,stroke:#333,stroke-width:2px,color:#000
    style D fill:#f3e5f5,stroke:#333,stroke-width:2px,color:#000
    style G fill:#e8f5e9,stroke:#333,stroke-width:2px,color:#000
    style H1 fill:#ffe0b2,stroke:#333,stroke-width:2px,color:#000
    style H2 fill:#ffe0b2,stroke:#333,stroke-width:2px,color:#000
    style H3 fill:#ffe0b2,stroke:#333,stroke-width:2px,color:#000
    style H4 fill:#ffe0b2,stroke:#333,stroke-width:2px,color:#000
